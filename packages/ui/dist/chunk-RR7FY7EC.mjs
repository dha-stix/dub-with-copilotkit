"use client"
import{a as T}from"./chunk-GVBIGY6N.mjs";import{a as A}from"./chunk-NWME2ANF.mjs";import{a as O}from"./chunk-TSQX23ME.mjs";import{b as E}from"./chunk-SNE7A3DF.mjs";import{o as g}from"./chunk-PTW2A7PR.mjs";import{flip as G,offset as J,size as U,useDismiss as W,useFloating as Y,useInteractions as Z}from"@floating-ui/react";import{Command as i,useCommandState as ee}from"cmdk";import{Check as te,ChevronDown as ae,Search as w,X as oe}from"lucide-react";import{createContext as re,forwardRef as se,useContext as L,useEffect as N,useMemo as le,useRef as F,useState as C}from"react";import{Drawer as f}from"vaul";import{jsx as e,jsxs as o}from"react/jsx-runtime";var v=re({inputAttrs:{},openCommandList:!1,setOpenCommandList:()=>{},inputValue:"",setInputValue:()=>{},disabled:!1,selectedItem:null,setSelectedItem:()=>{}});function we({items:r,selectedItem:a,setSelectedItem:d,className:s,disabled:t,adjustForMobile:u,icon:b,inputAttrs:x,noItemsElement:p}){let l=F(null),[c,y]=C(!1),[n,P]=C(""),[D,M]=C(!1);N(()=>{c&&M(!1)},[c]),N(()=>M(!0),[n]),N(()=>{a&&P(a.value)},[a]);let k=le(()=>{let m=n.toLowerCase();return D?r.filter(h=>h.value.toLowerCase().includes(m)):n?r.sort((h,q)=>(q.value.toLowerCase().includes(m)?1:0)-(h.value.toLowerCase().includes(m)?1:0)):r},[D,n,r]),{refs:R,floatingStyles:j,context:z}=Y({open:c,onOpenChange:y,middleware:[J(8),U({apply({elements:{floating:m},availableHeight:h}){Object.assign(m.style,{maxHeight:`${Math.max(75,Math.min(h,290))}px`})},padding:8}),G({fallbackStrategy:"initialPlacement",padding:8})]}),B=W(z),{getReferenceProps:K,getFloatingProps:$}=Z([B]),V=F(null),{scrollProgress:Q,updateScrollProgress:X}=T(V),{isMobile:_}=A();return e(v.Provider,{value:{inputAttrs:x||{},openCommandList:c,setOpenCommandList:y,inputValue:n,setInputValue:P,disabled:Boolean(t),selectedItem:a,setSelectedItem:d},children:_&&u?o(f.Root,{open:c,onOpenChange:y,children:[e(f.Trigger,{className:"sm:hidden",asChild:!0,children:e(i,{ref:l,className:"relative",shouldFilter:!1,loop:!0,children:o("div",{className:g("group relative rounded-md border border-gray-300 bg-white px-1 focus-within:border-gray-500 focus-within:ring-1 focus-within:ring-gray-500 md:min-w-[140px]",s),children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center justify-center pl-3 text-gray-400",children:a&&a.image?e("img",{src:a.image,alt:a.value,className:"h-4 w-4 rounded-full"}):b||e(w,{className:"h-4 w-4 text-gray-400"})}),o("div",{className:"flex h-10 px-8",children:[e(S,{}),e(I,{})]})]})})}),e(f.Overlay,{className:"fixed inset-0 z-40 bg-gray-100 bg-opacity-10 backdrop-blur"}),o(f.Portal,{children:[e(f.Content,{className:"fixed bottom-0 left-0 right-0 z-50 mt-24 rounded-t-lg border-t border-gray-200 bg-white",children:o(i,{ref:l,className:"relative",shouldFilter:!1,loop:!0,children:[o("div",{className:g("group relative mb-2 rounded-t-md border-b border-gray-300 bg-white p-1 sm:border sm:py-0 sm:focus-within:border-gray-500 sm:focus-within:ring-1 sm:focus-within:ring-gray-200",s),children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center justify-center pl-3 text-gray-400",children:a&&a.image?e("img",{src:a.image,alt:a.value,className:"h-4 w-4 rounded-full"}):b||e(w,{className:"h-4 w-4 text-gray-400"})}),o("div",{className:"flex h-10 px-8",children:[e(S,{}),e(I,{})]})]}),c&&o(i.List,{className:"dub-scrollbar h-[70vh] overflow-y-auto p-2",children:[r.length===0&&n===""&&(p?e("div",{children:p}):e("p",{className:"px-4 py-2 text-sm text-gray-600",children:"No items found."})),n!==""&&e(i.Empty,{className:"px-4 py-2 text-sm text-gray-600",children:"No results found."}),e(H,{items:k})]})]})}),e(f.Overlay,{})]})]}):o(i,{ref:l,className:"relative",shouldFilter:!1,loop:!0,children:[o("div",{className:g("group rounded-md border border-gray-200 bg-white px-1 transition-all focus-within:border-gray-500 focus-within:ring-4 focus-within:ring-gray-200",s),children:[e("div",{onClick:()=>y(m=>!m),className:"absolute inset-y-0 left-0 flex cursor-pointer items-center justify-center pl-3 text-gray-400",children:a&&a.image?e("img",{src:a.image,alt:a.value,className:"h-4 w-4 rounded-full"}):b||e(w,{className:"h-4 w-4 text-gray-400"})}),o("div",{className:"flex h-10 px-8",children:[e(S,{ref:R.setReference,...K()}),e(I,{})]})]}),c&&o("div",{ref:R.setFloating,style:j,...$(),className:"z-20 flex w-full min-w-[160px] flex-col overflow-hidden rounded-md border border-gray-200 bg-white shadow-md",children:[o("div",{ref:V,onScroll:X,className:"grow overflow-y-auto p-2",children:[o(i.List,{children:[r.length===0&&n===""&&(p?e("div",{children:p}):e("p",{className:"px-4 py-2 text-sm text-gray-600",children:"No items found."})),n!==""&&e(i.Empty,{className:"px-4 py-2 text-sm text-gray-600",children:"No results found."})]}),e(H,{items:k})]}),e("div",{className:"pointer-events-none absolute bottom-0 left-0 hidden h-16 w-full bg-gradient-to-t from-white sm:block",style:{opacity:1-Math.pow(Q,2)}})]})]})})}var S=se((r,a)=>{let d=ee(l=>l.filtered.count===0),{inputAttrs:s,openCommandList:t,setOpenCommandList:u,inputValue:b,setInputValue:x,disabled:p}=L(v);return e(i.Input,{ref:a,placeholder:(s==null?void 0:s.placeholder)||"Search...",autoFocus:t,onFocus:()=>u(!0),value:b,onValueChange:x,onKeyDown:l=>{l.key==="Escape"?(l.preventDefault(),u(!1)):l.key==="Enter"&&d?u(!1):l.key.match(/^[a-z0-9]$/i)&&!l.metaKey&&u(!0)},disabled:p,className:"block w-full truncate rounded-md border-none px-0 text-base text-gray-900 placeholder-gray-400 outline-none outline-0 transition-all duration-300 focus:ring-0 md:text-sm"})});function I(){let{setSelectedItem:r,openCommandList:a,setOpenCommandList:d,inputValue:s,setInputValue:t}=L(v);return e("button",{type:"button",onClick:()=>{d(u=>!u),r(null),t("")},className:"absolute inset-y-0 right-0 my-auto pr-3",children:s.length>0?e(oe,{className:"h-4 w-4 text-gray-400 transition-all hover:text-gray-700"}):e(ae,{className:g("h-4 w-4 text-gray-400 transition-all hover:text-gray-700",{"rotate-180 transform":a})})})}function H({items:r}){let{setSelectedItem:a,setOpenCommandList:d,setInputValue:s}=L(v);return r.map(t=>o(i.Item,{value:t.value,disabled:t.disabled,onSelect:()=>{a(t),s(t.value),d(!1)},className:"group flex cursor-pointer items-center justify-between rounded-md px-4 py-2 text-sm text-gray-900 hover:bg-gray-100 hover:text-gray-900 active:bg-gray-200 aria-disabled:cursor-not-allowed aria-disabled:opacity-75 aria-disabled:hover:bg-white aria-selected:bg-gray-100 aria-selected:text-gray-900",children:[o("div",{className:"flex items-center space-x-2",children:[t.image&&e(O,{src:t.image,alt:t.value,className:"h-4 w-4 rounded-full",width:16,height:16}),e("p",{className:g("whitespace-nowrap py-0.5 text-sm",t.color&&"rounded-md px-2",t.color==="red"&&"bg-red-100 text-red-600",t.color==="yellow"&&"bg-yellow-100 text-yellow-600",t.color==="green"&&"bg-green-100 text-green-600",t.color==="blue"&&"bg-blue-100 text-blue-600",t.color==="purple"&&"bg-purple-100 text-purple-600",t.color==="brown"&&"bg-brown-100 text-brown-600"),children:t.value}),t.label&&e(E,{className:"text-xs",variant:"neutral",children:t.label})]}),e(te,{className:"invisible h-5 w-5 text-gray-500 aria-selected:visible"})]},t.id))}export{we as a};
